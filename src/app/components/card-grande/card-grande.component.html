<div *ngIf="prodotto" class="containers">
    <div style="flex: 1;">
        <!-- Carousel -->
        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel" style="max-width: 500px; margin: 0 auto;">
            <div class="carousel-inner">
                <div *ngFor="let image of getImmagini(prodotto); let i = index" class="carousel-item" [ngClass]="{'active': i === 0}">
                    <img [src]="image" class="d-block w-100" alt="...">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <!-- End of Carousel -->
    </div>
    <div style="flex: 1; padding-left: 20px;">
        <div class="text-center">
            <h1><strong>{{ prodotto.title }}</strong></h1>
            <p><strong>Categoria:</strong> {{ prodotto.category.name }}</p>
            <p><strong>Description:</strong> {{ prodotto.description }}</p>
            <span class="star-rating">
                <ng-container *ngFor="let star of getStars(prodotto.stars); let i = index">
                  <span class="star" [ngClass]="{'checked': star === 1, 'half': star === 0.5}">&#9733;</span>
                </ng-container>
            </span>
            
            <!-- Bottoni taglia per prodotti con idCategory == 1 -->
            <div *ngIf="prodotto.idCategory === 1" class="mb-3">
                
                <!-- Bottoni visibili su schermi grandi -->
                <div class="btn-group d-none d-md-inline-flex" role="group">
                    <button type="button" class="btn" [ngClass]="{'btn-outline-primary': tagliaSelezionata !== 'S', 'btn-primary': tagliaSelezionata === 'S'}" (click)="selezionaTaglia('S')">S</button>
                    <button type="button" class="btn" [ngClass]="{'btn-outline-primary': tagliaSelezionata !== 'M', 'btn-primary': tagliaSelezionata === 'M'}" (click)="selezionaTaglia('M')">M</button>
                    <button type="button" class="btn" [ngClass]="{'btn-outline-primary': tagliaSelezionata !== 'L', 'btn-primary': tagliaSelezionata === 'L'}" (click)="selezionaTaglia('L')">L</button>
                    <button type="button" class="btn" [ngClass]="{'btn-outline-primary': tagliaSelezionata !== 'XL', 'btn-primary': tagliaSelezionata === 'XL'}" (click)="selezionaTaglia('XL')">XL</button>
                </div>
                <!-- Menu a tendina visibile su schermi piccoli -->
                <div class="dropdown d-md-none">
                    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="dropdownTaglie" data-bs-toggle="dropdown" aria-expanded="false">
                        Seleziona taglia <span *ngIf="tagliaSelezionata">({{ tagliaSelezionata }})</span>
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownTaglie">
                        <li><a class="dropdown-item" (click)="selezionaTaglia('S')">S</a></li>
                        <li><a class="dropdown-item" (click)="selezionaTaglia('M')">M</a></li>
                        <li><a class="dropdown-item" (click)="selezionaTaglia('L')">L</a></li>
                        <li><a class="dropdown-item" (click)="selezionaTaglia('XL')">XL</a></li>
                    </ul>
                </div>
            </div>
            <!-- Fine bottoni taglia -->
            
            <p><strong>Prezzo:</strong> {{ prodotto.price | currency : 'EUR'}}</p>
            <a class="btn btn-primary" (click)="aggiungiAlCarrello()" *ngIf="!prodotto.addedToCart">Add to cart</a>
            <div class="text-success" *ngIf="prodotto.addedToCart">
                <i class="fa fa-check"></i>
            </div>
            <div class="text-danger" *ngIf="prodotto.addedToCart === false">
                <i class="fa fa-times"></i>
            </div>
        </div>
    </div>
</div>
